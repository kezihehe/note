

redis主从复制原理
redis主从复制主要分为两个阶段：全量同步(复制初始化)、增量同步
全量同步阶段：
当一个从数据库(slave)启动后，会向主数据库(master)发送sync命令。
同时master数据库在接收到sync命令后会开始在后台保存快照(即RDB持久化的过程，命令为bgsave)，并将保存快照期间接收到的命令缓存起来。
当快照保存完成后，master会将快照文件和所有缓存的命令发送给从数据库。
slave接收到master发送的快照和命令后，丢弃原有slave上的旧数据，并载入接收到的master快照和执行缓存命令

增量同步阶段：
全量同步阶段完成后，master数据库每当接收到写命令时，就会将命令同步给slav数据库，从而保证主从数据库数据一致。











